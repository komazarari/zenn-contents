---
title: "k8s Headless Service ã‚’ä½¿ã£ã¦ä»»æ„ã® IP ã‚’ Service åã§åå‰è§£æ±ºã™ã‚‹"
emoji: "ğŸ“ƒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Kubernetes"]
published: true
---

## Headless Service ã¨ã¯
https://kubernetes.io/ja/docs/concepts/services-networking/service/

Service è‡ªèº«ã® IP ã‚’æŒãŸãšã€ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã‚„ãƒ—ãƒ­ã‚­ã‚·ã¨ã—ã¦åƒã‹ãªã„ã€‚ã¤ã¾ã‚Šã€å˜ã«åå‰è§£æ±ºã®ãŸã‚ã«ä½¿ã†ã“ã¨ãŒã§ãã‚‹ Service

`clusterIP: None` ã‚’æŒ‡å®šã—ã¦ä½œæˆã•ã‚Œã‚‹

## ã©ã†åå‰è§£æ±ºã•ã‚Œã‚‹ã®ã‹ï¼Ÿ
`selector` ã‚’ã‚‚ã¤å ´åˆã¯ãã‚Œã«ãƒãƒƒãƒã™ã‚‹ Pod ç­‰ã® IP ã‚’ã€`selector` ã‚’æŒãŸãªã„å ´åˆã¯åŒåã® Endpoints ãƒªã‚½ãƒ¼ã‚¹ã«å¾“ã†ã€‚

## ä»»æ„ã® IP ã‚’è§£æ±ºã•ã›ã‚‹ã«ã¯

Service ã¨åŒã˜åå‰ã® Endpoints ãƒªã‚½ãƒ¼ã‚¹ã« IP ã‚’ç›´æ¥æ›¸ãã€‚

```yaml
---
kind: Service
apiVersion: v1
metadata:
  name: myservice
spec:
  clusterIP: None
---
kind: Endpoints
apiVersion: v1
metadata:
  name: myservice
subsets:
  - addresses:
    - ip: 203.0.113.1
```

```
root@tmp:/# dig myservice +search +short
203.0.113.1
root@tmp:/# dig myservice.mynamespace.svc.cluster.local +search +short
203.0.113.1
```